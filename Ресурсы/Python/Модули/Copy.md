---
title: Copy
tags:
  - Python
  - Модули
  - ТипыДанных
---
---
### Модуль `copy`

#### Описание:
Модуль `copy` в Python предоставляет функции для поверхностного и глубокого копирования объектов. В стандартных ситуациях при копировании переменной создаётся новая ссылка на существующий объект, что может привести к непредвиденным изменениям данных. Использование `copy` позволяет создавать новые объекты, а не ссылки на оригиналы.

#### Основные функции:

1. **`copy.copy()`** — поверхностное копирование (shallow copy).
2. **`copy.deepcopy()`** — глубокое копирование (deep copy).

---

#### Основные понятия:

##### 1. **Поверхностное копирование (`copy.copy()`)**

Поверхностное копирование создаёт новый объект, но копируются только ссылки на вложенные объекты, а не сами вложенные объекты. Это означает, что изменения во вложенных структурах данных будут отражаться и в копии.

Пример:
```python
import copy

original = [1, 2, [3, 4]]
shallow_copy = copy.copy(original)

# Изменим вложенный список
original[2][0] = 10

print(original)       # [1, 2, [10, 4]]
print(shallow_copy)   # [1, 2, [10, 4]] — копия также изменилась
```

##### 2. **Глубокое копирование (`copy.deepcopy()`)**

Глубокое копирование создаёт новый объект, включая все вложенные объекты. Это означает, что любые изменения в оригинале не повлияют на копию.

Пример:
```python
import copy

original = [1, 2, [3, 4]]
deep_copy = copy.deepcopy(original)

# Изменим вложенный список
original[2][0] = 10

print(original)    # [1, 2, [10, 4]]
print(deep_copy)   # [1, 2, [3, 4]] — копия осталась неизменной
```

#### Применение на практике:

1. **Когда использовать `copy.copy()`?**
   - Если вы копируете объект, который не содержит вложенные объекты или если вам не важны изменения во вложенных объектах.
   - Это быстрее, чем глубокое копирование, так как оно не копирует рекурсивно вложенные структуры данных.

2. **Когда использовать `copy.deepcopy()`?**
   - Если объект содержит вложенные объекты (списки внутри списков, словари в списках и т.д.), и вам нужно создать полную независимую копию.
   - Это особенно важно, если вложенные структуры данных могут изменяться, и вы хотите, чтобы оригинал и копия были полностью независимы друг от друга.

#### Пример использования в реальных задачах:

- **Клонирование сложных объектов**:
  Глубокое копирование полезно при работе с объектами, которые содержат много вложенных данных, например, при клонировании графов, деревьев, или других сложных структур данных.

- **Избежание неожиданных изменений**:
  Когда вы передаёте объекты в функции и хотите убедиться, что исходные данные не изменятся, глубокое копирование поможет предотвратить побочные эффекты.

#### Ограничения модуля `copy`:

- **Рекурсивные структуры данных**:
  Если объект содержит сам себя (рекурсивные ссылки), то глубокое копирование может привести к ошибкам. Однако Python справляется с этой задачей с помощью специальных механизмов для обработки рекурсивных объектов.

- **Некоторые типы объектов**:
  Не все объекты могут быть скопированы. Например, модули, открытые файлы, сокеты и некоторые другие системные объекты не поддерживают копирование.

Пример с рекурсией:
```python
import copy

original = [1, 2]
original.append(original)

# Попытка глубокого копирования
deep_copy = copy.deepcopy(original)
print(deep_copy)  # [1, 2, [...]] — Python корректно обрабатывает рекурсию
```

---

#### Заключение:
Модуль `copy` предоставляет важные инструменты для управления копированием объектов в Python. Поверхностное копирование (`copy.copy()`) подходит для простых объектов, где изменения в оригинале и копии могут быть допустимыми, в то время как глубокое копирование (`copy.deepcopy()`) необходимо, когда вам нужна полная независимость между объектом и его копией.

#### Полезные ссылки:
- [Официальная документация Python: Модуль copy](https://docs.python.org/3/library/copy.html)
- [Статья о копировании объектов в Python](https://realpython.com/copying-python-objects/

---